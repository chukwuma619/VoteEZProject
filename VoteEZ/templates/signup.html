{% extends 'auth_base.html' %}

{% block title %}Signup{% endblock %}

{% block content %}
    <div class="flex items-center justify-center min-h-screen">
        <div
                class="flex items-center justify-center flex-col p-4 border rounded gap-y-6 shadow w-96 min-w-fit max-w-lg ">
            <div class="flex flex-col items-center gap-y-6">
                <svg xmlns="http://www.w3.org/2000/svg" class="fill-blue-800 w-16 h-16" viewBox="0 0 64 64">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                          d="M60.5875 16.5C61.0325 15.09 60.5875 14.065 58.6188 14.065H52.0725C50.4212 14.065 49.6587 14.9625 49.2137 15.9225C49.2137 15.9225 45.8462 24.1225 41.1437 29.4387C39.6187 30.9762 38.92 31.4888 38.0938 31.4888C37.6488 31.4888 37.0762 30.9762 37.0762 29.5675V16.4338C37.0762 14.7688 36.5687 14 35.17 14H24.875C23.8575 14 23.2225 14.7688 23.2225 15.5375C23.2225 17.1388 25.5737 17.5237 25.8275 22.0075V31.75C25.8275 33.8638 25.4525 34.25 24.62 34.25C22.3963 34.25 16.995 25.9862 13.755 16.57C13.125 14.705 12.485 14 10.8325 14H4.22375C2.3175 14 2 14.8963 2 15.8575C2 17.5875 4.22375 26.2988 12.3575 37.8288C17.7587 45.7038 25.4475 49.9362 32.3737 49.9362C36.5687 49.9362 37.0762 48.975 37.0762 47.3737V41.4162C37.0762 39.495 37.4575 39.175 38.7925 39.175C39.745 39.175 41.4613 39.6863 45.3375 43.4663C49.785 47.95 50.5475 50 53.0262 50H59.5713C61.4775 50 62.3675 49.0387 61.8587 47.1813C61.2875 45.3238 59.1263 42.6338 56.33 39.4313C54.805 37.6388 52.5175 35.6525 51.8187 34.6912C50.8662 33.41 51.12 32.8975 51.8187 31.745C51.755 31.745 59.7625 20.3425 60.5875 16.495"/>
                    <title>VoteEZ Logo</title>
                </svg>
                <div>
                    <h3 class="text-center font-semibold truncate text-xl">Sign Up</h3>
                    <p class="text-center text-base">Create an account to continue</p>
                </div>
            </div>
            {% if form.errors %}
            {% for field in form %}
                {% if field.errors %}
                    <div class="w-[inherit] bg-red-200 p-1 text-center -mb-2.5 text-xs rounded">
                    {% for error in field.errors %}
                        <p>{{ error }}</p>
                    {% endfor %}
                    </div>
                {% endif %}
            {% endfor %}

        {% endif %}

            <form action="" method="post" class="w-[inherit] flex flex-row items-stretch flex-wrap gap-6">

                {% csrf_token %}

                <div class="basis-full md:basis-form">
                    <label for="last_name" class="block text-sm font-medium">{{ form.last_name.label }}</label>
                    {{ form.last_name }}
                </div>

                <div class="basis-full md:basis-form">
                    <label for="first_name" class="block text-sm font-medium">{{ form.first_name.label }}</label>
                    {{ form.first_name }}
                </div>

                <div class="basis-full">
                    <label for="email" class="block text-sm font-medium">{{ form.email.label }}</label>
                    {{ form.email }}
                </div>


                <div class="basis-full md:basis-form">
                    <label for="password1" class="block text-sm font-medium">{{ form.password1.label }}</label>
                    {{ form.password1 }}
                </div>

                <div class="basis-full md:basis-form">
                    <label for="password2" class="block text-sm font-medium">{{ form.password2.label }}</label>
                    {{ form.password2 }}
                </div>

                <div class="basis-full">
                    <button type="submit"
                            class="bg-blue-800 text-white rounded w-full text-base py-2 hover:bg-blue-600">Sign up
                    </button>
                </div>

            </form>
            <div>
                <p class="text-sm">Already have an account? <a href="{% url 'login' %}" class="text-blue-800">Sign in</a></p>
            </div>
        </div>
    </div>

    <script>
        {% if form.errors %}
            {% for field in form %}
                {% if field.errors %}
                    {% for error in field.errors %}
                        {% if field.name == "password2" %}
                            document.querySelector("#password1").classList.add("outline-red-300")
                        	document.querySelector("#password2").classList.add("outline-red-300")
                        {% else %}
                            document.querySelector('#{{ field.id_for_label }}').classList.add("outline-red-300")
                        {% endif %}

                    {% endfor %}
                {% endif %}
            {% endfor %}

        {% endif %}


    </script>
{% endblock %}